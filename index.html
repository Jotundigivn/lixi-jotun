
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lì xì | Jotun Việt Nam</title>
  <style>
    :root{ --jotun-navy:#003057; --jotun-yellow:#F9B233; --jotun-red:#E03C31; }
    *{box-sizing:border-box}
    body{ margin:0; font-family:'Segoe UI', Arial, Helvetica, sans-serif; background: radial-gradient(circle at 50% -20%, #ffe4a3, #fff8e6 45%, #fff8e6); color:#222; min-height:100vh; display:flex; align-items:center; justify-content:center; }
    .card{ width:min(720px,92vw); background:#fff; border-radius:20px; box-shadow:0 20px 60px rgba(0,0,0,.12); overflow:hidden; border:6px solid var(--jotun-yellow); position:relative }
    header{ background:linear-gradient(90deg,var(--jotun-navy), #022f52 60%); color:#fff; padding:14px 18px; display:flex; align-items:center; gap:14px }
    /* === Jotun logo: show exact brand, no decoration === */
    header img.logo{
      height: 44px;      /* chỉnh 40–48 tùy ý */
      width: auto;
      display: block;
      padding: 0; background: transparent; border-radius: 0; box-shadow: none; object-fit: contain;
    }
    header h1{ font-size:18px; margin:0; font-weight:700; line-height:1.25 }
    header small{ display:block; opacity:.9 }

    .content{ padding:26px 18px 34px; text-align:center }
    .greeting{ font-size:26px; margin:8px 0 6px; font-weight:800; color:var(--jotun-navy); opacity:0; transform:translateY(-6px); transition:.5s ease }
    .greeting.show{ opacity:1; transform:none }
    .money{ font-variant-numeric: tabular-nums; font-size:clamp(44px, 8vw, 72px); line-height:1; font-weight:900; color:var(--jotun-red); text-shadow:0 6px 0 rgba(224,60,49,.12); margin:16px 0 6px }
    .unit{ color:#a61b1b; font-weight:700 }
    .subtitle{ margin:14px 0 0; color:#444; font-size:18px; opacity:0; transform:translateY(4px); transition:.45s ease }
    .subtitle.show{ opacity:1; transform:none }

    .progress-wrap{ width:100%; max-width:520px; height:10px; background:#ffe0b3; border-radius:999px; margin:18px auto 6px; overflow:hidden }
    .progress{ height:100%; width:0; background:linear-gradient(90deg, var(--jotun-red), #ff7a66); transition:width .2s ease-out }

    footer{ padding:14px 18px 22px; display:flex; justify-content:center }
    .badge{ padding:8px 12px; border-radius:999px; background:#fff3d6; color:#7a5200; font-weight:600; border:1px solid #ffe1a8 }

    canvas#confetti, canvas#fireworks{ position:fixed; inset:0; pointer-events:none }
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <canvas id="fireworks"></canvas>

  <div class="card">
    <header>
      <img src="logo-jotun.png" alt="Jotun" class="logo" />
      <div>
        <h1>Jotun Việt Nam</h1>
        <small>Thiệp chúc Tết & lì xì may mắn</small>
      </div>
    </header>

    <div class="content">
      <div class="greeting" id="greeting">Xin chúc mừng Bạn được nhận</div>
      <div class="money" id="money">0</div>
      <div class="unit">đồng</div>
      <p class="subtitle" id="subtitle">Số tiền sẽ được công ty CK vào tài khoản cá nhân</p>
      <div class="progress-wrap" aria-hidden="true"><div class="progress" id="bar"></div></div>
    </div>

    <footer>
      <span class="badge">Chúc Xuân An Khang – Vạn Sự Như Ý</span>
    </footer>
  </div>

<script>
  const TARGET_FIXED = 10_000_000;
  const MIN_RANDOM  = 1_000_000;
  const MAX_RANDOM  = 100_000_000;
  const DURATION    = 5000;
  const START_DELAY = 600;
  const RANKS = [1_000_000, 100_000, 10_000, 1_000, 100, 10, 1];
  const easeOut = t => 1 - Math.pow(1 - t, 3);
  function clamp(v, min, max){ return Math.min(max, Math.max(min, v)); }
  function quantize(v, step){ return Math.round(v / step) * step; }

  function animateRandomToFixed(el, fixedTarget, minRand, maxRand, duration){
    const start = performance.now();
    function tick(now){
      const t = Math.min(1, (now - start)/duration);
      const eased = easeOut(t);
      const idx  = Math.min(RANKS.length-1, Math.floor(eased * RANKS.length));
      const step = RANKS[idx];
      const randomVal = Math.floor(Math.random() * (maxRand - minRand + 1)) + minRand;
      const weightToTarget = Math.pow(eased, 1.5);
      const blended = (1 - weightToTarget) * randomVal + weightToTarget * fixedTarget;
      const candidate = clamp(quantize(blended, step), minRand, maxRand);

      el.textContent = Math.floor(candidate).toLocaleString('vi-VN');
      const bar = document.getElementById('bar');
      if(bar){ bar.style.width = (eased*100).toFixed(2) + '%'; }

      if (t < 1){
        requestAnimationFrame(tick);
      } else {
        el.textContent = Number(fixedTarget).toLocaleString('vi-VN');
        document.getElementById('greeting').classList.add('show');
        setTimeout(()=> document.getElementById('subtitle').classList.add('show'), 350);
        launchConfetti();
        launchFireworks();
      }
    }
    requestAnimationFrame(tick);
  }

  function launchConfetti(){
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    const pieces = [];
    const colors = ['#F9B233','#E03C31','#003057','#ff7a66','#ffd166'];
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    resize(); addEventListener('resize', resize);
    for(let i=0;i<120;i++){
      pieces.push({ x: Math.random()*canvas.width, y: -20 - Math.random()*canvas.height*0.5, r: 4 + Math.random()*6, tilt: Math.random()*Math.PI, color: colors[(Math.random()*colors.length)|0], speed: 1 + Math.random()*2.5 });
    }
    let life = 0;
    (function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      pieces.forEach(p=>{ p.y += p.speed; p.tilt += 0.1; ctx.fillStyle = p.color; ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.tilt); ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2*0.6); ctx.restore(); });
      life++;
      if(life < 220) requestAnimationFrame(draw); else { ctx.clearRect(0,0,canvas.width,canvas.height); }
    })();
  }

  function launchFireworks(){
    const canvas = document.getElementById('fireworks');
    const ctx = canvas.getContext('2d');
    function resize(){ canvas.width = innerWidth; canvas.height = innerHeight; }
    resize(); addEventListener('resize', resize);

    const rockets = [];
    const particles = [];
    const colors = ['#ffef9f','#ffe066','#ffd166','#f9b233','#E03C31','#ff7a66','#ffffff'];

    let bursts = 0;
    const burstInterval = setInterval(()=>{
      for(let i=0;i<3;i++){
        rockets.push({ x: innerWidth*0.2 + Math.random()*innerWidth*0.6, y: innerHeight + 10,
          vx: (Math.random()-0.5)*1.2, vy: - (6 + Math.random()*3), color: colors[(Math.random()*colors.length)|0], life: 60 + Math.random()*20 });
      }
      bursts++;
      if(bursts>4) clearInterval(burstInterval);
    }, 320);

    let frames = 0;
    (function draw(){
      ctx.globalCompositeOperation = 'destination-out';
      ctx.fillStyle = 'rgba(0,0,0,0.2)';
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.globalCompositeOperation = 'lighter';

      for(let i=rockets.length-1;i>=0;i--){
        const r = rockets[i];
        r.x += r.vx; r.y += r.vy; r.vy += 0.08; r.life--;
        ctx.beginPath(); ctx.arc(r.x, r.y, 2.2, 0, Math.PI*2); ctx.fillStyle = r.color; ctx.fill();
        if(r.vy >= -0.5 || r.life<=0){
          for(let p=0;p<60;p++){
            const a = Math.random()*Math.PI*2; const sp = 1.5 + Math.random()*3.5;
            particles.push({x:r.x, y:r.y, vx:Math.cos(a)*sp, vy:Math.sin(a)*sp, life:40+Math.random()*30, color:r.color});
          }
          rockets.splice(i,1);
        }
      }

      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        p.x += p.vx; p.y += p.vy; p.vy += 0.04; p.life--; p.vx *= 0.99; p.vy *= 0.99;
        ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI*2); ctx.fillStyle = p.color; ctx.fill();
        if(p.life<=0) particles.splice(i,1);
      }

      frames++;
      if(frames < 500) requestAnimationFrame(draw); else { ctx.clearRect(0,0,canvas.width,canvas.height); }
    })();
  }

  setTimeout(()=>{
    animateRandomToFixed(document.getElementById('money'), TARGET_FIXED, MIN_RANDOM, MAX_RANDOM, DURATION);
  }, START_DELAY);
</script>
</body>
</html>
